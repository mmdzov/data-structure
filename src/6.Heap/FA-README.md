# Heap

یک نوع ساختار داده درختی دودویی است که دارای ویژگی های زیر است.

1. ساختار بصورت CBT یا همان Complete Binary Tree می باشد
در این حالت باید گره های هر سطر کامل بشود بجز احتمالا آخرین لایه. 

گره ها از چپ به راست پر میشوند بعنوان مثال ما مقدار  A, B, C, D, E, F را داریم که میخواهیم در یک درخت CBT نمایش بدیم.
         A
   B         C
D   E     F   

مشاهده میکنید که از چپ به راست مقدار دهی صورت گرفته و این یک درخت CBT است.
حالا E و D فرزند B هستند و B فرزند A می باشد. همینطور برای F و C چنین چیزی صدق میکند.

مثال زیر هم درست است

         A
   B         C
 D   E     F   G

مثال درخت زیر CBT نیست:

        A
   B        C
D              E

چون در B حداکثر تعداد گره ها درج نکردیم که به سراغ C رفتیم.... درخت زیر هم CBT نیست:

         A
   B         C
D          E   F

مگه نگفتیم هر سطر از چپ به راست پیش میریم؟ پس چرا هنوز گره های زیرمجموعه B کامل پر نشده رفتیم سراغ C.... این یک درخت باینری کامل  (CBT) نیست.

2. هر گره Heap property را برآورده میکند.

اگر A والد B باشد بنابراین:

در Max Heap باید A بزرگ تر مساوی B باشد که با علامت زیر نمایش داده میشود
key(A) ≥ key(B)

در Min Heap باید A کوچک تر مساوی B باشد که با علامت زیر نمایش داده میشود. 
key(A) ≤ key(B)

برای درک بهتر می توانید Heap را یک آرایه تصور کنید 

به علت دودویی بودن heap ها ترتیب اعداد کمی متفاوت است به این تصویر توجه کنید

آرایه را مشاهده کنید، ترتیب آرایه اولیه اصلا مهم نیست ما با نشانگرا کار داریم توجه کنید که هر عنصر دو نشانگر به عناصر خالی بعدش دارد که 0 و 1 را نشان میدهد و این دودویی بودن heap رو ثابت میکنه. 

حالا بیایم آرایه زیر رو تشریح کنیم تا درک نحوه کار heap ساده تر بشه:
[4, 6, 3, 12, 1, 88]

من میخوام max heap روی آرایه بالا انجام شه و سه عنصر اول رو ابتدا میارم وسط بنابراین می نویسم :

       4
   6      3

چون 6 از 4 بزرگ تره جاشون عوض میشه و 6 سواپ( جا به جا ) میشه به بالا. 

        6
    4      3
12

در بالا 12 چون بزرگ تر از 4 هست سواپ میشه، بزرگ تر از 6 هم هست بنابراین بازم سواپ میشه.

            12
      6           3
   4    1      88

حالا 88 بزرگ تر از 3 هست سواپ میشه و حتی بزرگ تر از 12 هست بازم سواپ میشه و در نهایت نتیجه آرایه بالا، حالت زیر است :

           88
      6         12
   4    1     3

[ 88, 6, 12, 4, 1, 3 ]

همچنین برای min heap به همین صورت ولی بلعکس یعنی از کم به زیاد می باشد همانند زیر:

            1
     3            4
  12   6       88

‌[ 1, 3, 4, 12, 6, 88 ]